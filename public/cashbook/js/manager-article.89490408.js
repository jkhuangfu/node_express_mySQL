(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manager-article"],{"036d":function(e,t,a){"use strict";var n=a("0940"),i=a.n(n);i.a},"0940":function(e,t,a){},"0bd0":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"table",staticClass:"article_manager"},[a("div",{staticClass:"article_manager_search"},[a("Input",{staticClass:"article_manager_search_input",model:{value:e.articleTitle,callback:function(t){e.articleTitle=t},expression:"articleTitle"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("文章标题:")])]),a("div",{staticClass:"article_manager_search_handle"},[a("Button",{staticClass:"article_manager_search_handle_btn",attrs:{type:"info"},on:{click:e.handleSearch}},[e._v("模糊查询")]),a("Select",{staticClass:"article_manager_search_handle_status",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},[a("Option",{attrs:{value:"2"}},[e._v("查看全部")]),a("Option",{attrs:{value:"1"}},[e._v("已展示")]),a("Option",{attrs:{value:"0"}},[e._v("未展示")])],1)],1)],1),a("div",{staticClass:"article_manager_table"},[a("Vtable",{attrs:{columns:e.columns,height:e.height,loading:e.loading,tableData:e.tableData,total:e.total,current:e.pageIndex},on:{"on-page-change":e.pageChange,"on-page-size-change":e.pageSizeChange,"on-select":e.select},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.row,i=t.index;return a("div",{attrs:{index:i}},[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"info"},on:{click:function(t){return e.view(n.id)}}},[e._v("查看")]),a("Button",{staticStyle:{"margin-right":"5px"},attrs:{size:"small",type:"success"},on:{click:function(t){return e.changeStatus(n.id,n.isShow)}}},[e._v("状态修改")]),a("Button",{attrs:{size:"small",type:"warning"},on:{click:function(t){return e.showModal(n.id)}}},[e._v("删除")])],1)}}])},[e.selectData.length>1?a("div",{attrs:{slot:"pl"},slot:"pl"},[a("Button",{on:{click:e.deleteMore}},[e._v("批量删除")])],1):e._e()])],1),a("Modal",{attrs:{closable:!1,loading:e.del_loading,"class-name":"vertical-center-modal",title:"删除文章"},on:{"on-ok":e.asyncOk},model:{value:e.delModle,callback:function(t){e.delModle=t},expression:"delModle"}},[a("p",[e._v("确认删除文章吗?点击确认即可删除!")])])],1)},i=[],c=(a("ac6a"),a("75fc")),l=(a("96cf"),a("3b8d")),s=a("093f"),r=a("311a"),o=a("2d66"),d=a("01f8"),u=a("6be2"),h=a("0dd2"),g=a("f8c8"),p={components:{Vtable:h["a"],Modal:u["a"],Button:d["a"],Input:o["a"],Select:r["a"],Option:s["a"]},data:function(){return{pageIndex:1,pageSize:10,type:"2",articleTitle:"",height:"",delModle:!1,del_loading:!1,articleId:"",total:0,loading:!1,selectData:[],columns:[{type:"selection",width:60,align:"center"},{title:"文章ID",width:80,key:"id",align:"center"},{title:"文章标题",key:"articleTitle",align:"center"},{title:"发布日期",key:"createTime",align:"center"},{title:"展示状态",key:"status",align:"center"},{title:"操作",slot:"action",align:"center"}],tableData:[]}},watch:{type:function(){this.pageIndex=1,this.changeToGet()}},created:function(){var e=this.articleTitle,t=this.type,a=this.pageIndex,n=this.pageSize;this.getArticleData({articleTitle:e,type:t,pageIndex:a,pageSize:n})},mounted:function(){this.computedHeight(),window.addEventListener("resize",this.computedHeight,!1)},methods:{computedHeight:function(){this.height=document.querySelector(".blog_menu")?parseInt(window.getComputedStyle(document.querySelector(".blog_menu")).height)-145:0},view:function(e){console.log(e)},showModal:function(e){this.delModle=!0,this.articleId=e},changeStatus:function(e,t){var a=this;this.$Modal.confirm({title:"文章状态修改",content:"确认修改文章状态吗？",onOk:function(){var n=Object(l["a"])(regeneratorRuntime.mark(function n(){var i,c,l,s,r;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(g["a"])({id:e,status:1===t?0:1});case 2:i=n.sent,i&&200===i.code?(a.$Message.success("修改成功"),c=a.articleTitle,l=a.type,s=a.pageIndex,r=a.pageSize,a.getArticleData({articleTitle:c,type:l,pageIndex:s,pageSize:r})):a.$Message.warning("修改失败");case 4:case"end":return n.stop()}},n)}));function i(){return n.apply(this,arguments)}return i}()})},handleSearch:function(){this.pageIndex=1,this.changeToGet()},changeToGet:function(){var e=this;this.$nextTick(function(){var t=e.articleTitle,a=e.type,n=e.pageIndex,i=e.pageSize;e.getArticleData({articleTitle:t,type:a,pageIndex:n,pageSize:i})})},deleteMore:function(){var e=[];this.selectData.map(function(t){e.push(t.id)}),this.delModle=!0,this.articleId=e.join(",")},asyncOk:function(){this.delArticle({id:this.articleId})},select:function(e){this.selectData=Object(c["a"])(e)},pageSizeChange:function(e){this.pageSize=e,this.pageIndex=1,this.changeToGet()},pageChange:function(e){this.pageIndex=e,this.changeToGet()},getArticleData:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(g["k"])(t);case 3:a=e.sent,a&&200===a.code&&(this.total=a.count,a.data.forEach(function(e){e.status=1===e.isShow?"已展示":"未展示"}),this.tableData=Object(c["a"])(a.data)),this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),delArticle:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var a,n,i,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.del_loading=!0,e.next=3,Object(g["f"])(t);case 3:a=e.sent,this.del_loading=!1,this.delModle=!1,a&&200===a.code&&(this.$Message.success("删除成功"),this.pageIndex=1,n=this.articleTitle,i=this.type,c=this.pageIndex,l=this.pageSize,this.getArticleData({articleTitle:n,type:i,pageIndex:c,pageSize:l}));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},f=p,m=(a("036d"),a("dcf5"),a("2877")),v=Object(m["a"])(f,n,i,!1,null,"ec1f919a",null);t["default"]=v.exports},"78b2":function(e,t,a){},dcf5:function(e,t,a){"use strict";var n=a("78b2"),i=a.n(n);i.a}}]);